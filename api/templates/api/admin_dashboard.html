{% extends 'api/base.html' %}
{% block title %}Admin - BudgetBot{% endblock %}
{% block content %}
<h2 class="text-3xl font-bold mb-4">Tableau de bord Admin</h2>
<div class="bg-white dark:bg-gray-800 p-4 rounded-lg shadow">
    <h3 class="text-xl font-semibold mb-2">Statistiques</h3>
    <p><b>Utilisateurs :</b> {{ total_users }}</p>
    <p><b>Prédictions totales :</b> {{ total_predictions }}</p>
    <h4 class="text-lg font-semibold mt-4">Prédictions par commune</h4>
    <table class="w-full">
        <thead>
            <tr>
                <th class="px-4 py-2">Commune</th>
                <th class="px-4 py-2">Nombre de prédictions</th>
            </tr>
        </thead>
        <tbody>
            {% for item in predictions_by_commune %}
            <tr>
                <td class="px-4 py-2">{{ item.commune__name }}</td>
                <td class="px-4 py-2">{{ item.count }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
<!-- Gestion des communes -->
<div class="bg-white dark:bg-gray-800 p-4 rounded-lg shadow mt-4">
    <h3 class="text-xl font-semibold mb-2">Gérer les communes</h3>
    <a href="{% url 'admin:api_commune_changelist' %}" class="bg-blue-500 text-white px-4 py-2 rounded">Accéder à l'admin Django</a>
</div>
{% endblock %}
